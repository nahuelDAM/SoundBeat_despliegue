import{b as e,c as i}from"./chunk-5NEJBAS5.js";import{d as l,f as s,p as h}from"./chunk-5RLBJS7C.js";var g=(()=>{let u=class u{constructor(){this.idUsuario=new l(""),this.idUsuario$=this.idUsuario.asObservable(),this.rolUsario=new l(""),this.rolUsario$=this.rolUsario.asObservable();let t=localStorage.getItem("rolUsuario");t&&this.rolUsario.next(t);let a=localStorage.getItem("idUsuario");a&&this.idUsuario.next(a)}login(t,a){let o={email:t,password:a};return s(e.post({url:`${i.URLbase}/api/auth/login`,headers:{"Content-Type":"application/json"},data:o}).then(r=>r.data))}register(t){return s(e.post({url:`${i.URLbase}/api/auth/register`,headers:{"Content-Type":"application/json"},data:t}).then(a=>a.data))}obtenerUsuarioPorId(t){let a=`${i.URLbase}/api/usuarios/${t}`;return s(e.get({url:a,headers:this._getAuthHeaders()}).then(o=>o.data))}guardarToken(t){localStorage.setItem("token",t)}guardarIdUsuario(t){this.idUsuario.next(t),localStorage.setItem("idUsuario",t)}guardarRolUsuario(t){this.rolUsario.next(t),localStorage.setItem("rolUsuario",t)}cambiarPassword(t){let a=`${i.URLbase}/api/auth/cambiar-password`,o=e.post({url:a,headers:this._getAuthHeaders(),data:t}).then(r=>{if(r.status>=200&&r.status<300)return r.data;throw{status:r.status,error:r.data}});return s(o)}cambiarEmail(t){let a=`${i.URLbase}/api/auth/cambiar-email`,o=e.post({url:a,headers:this._getAuthHeaders(),data:t}).then(r=>{if(r.status>=200&&r.status<300)return r.data;throw{status:r.status,error:r.data}});return s(o)}forgotPassword(t){let a=`${i.URLbase}/api/auth/forgot-password`;return s(e.post({url:a,headers:{"Content-Type":"application/json"},data:{email:t}}).then(o=>o.data))}resetPassword(t,a){let o=`${i.URLbase}/api/auth/reset-password?token=${t}`,r=e.post({url:o,headers:{"Content-Type":"application/json"},data:{password:a}}).then(n=>{if(n.status>=200&&n.status<300)return n.data;throw{status:n.status,error:n.data}});return s(r)}_getAuthHeaders(){let t=localStorage.getItem("token"),a={"Content-Type":"application/json"};return t&&(a.Authorization=`Bearer ${t}`),a}};u.\u0275fac=function(a){return new(a||u)},u.\u0275prov=h({token:u,factory:u.\u0275fac,providedIn:"root"});let d=u;return d})();export{g as a};
