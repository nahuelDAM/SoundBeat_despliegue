import{a as ie}from"./chunk-MPTL7WGM.js";import{a as ne}from"./chunk-XTSUAW32.js";import"./chunk-5NEJBAS5.js";import{$c as Z,Ab as B,D as s,Ea as E,F as _,H as k,Hb as N,Hc as Q,Ja as U,K as h,Kc as X,M as l,Ma as y,Mb as j,O as v,Q as n,Qb as A,R as i,Ra as z,S as d,Sb as L,T as C,Tb as W,U as P,W as b,X as m,Y as u,_a as D,ac as Y,cd as $,ea as g,ec as H,fa as M,fc as G,gc as R,ja as O,ka as S,la as w,md as ee,pc as q,qb as V,t as p,u as f,ud as te,va as I,vc as J,xc as K,ya as T,zb as F}from"./chunk-5RLBJS7C.js";import"./chunk-B6B5UJKW.js";import"./chunk-ZGM7264U.js";import"./chunk-YKTCUWBK.js";import"./chunk-WS3OVXI4.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-OWSRRI5Z.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import"./chunk-RW4GY4BD.js";function oe(o,c){if(o&1&&(n(0,"div",24)(1,"ion-label")(2,"h3"),g(3,"Nombre de usuario"),i(),n(4,"p"),g(5),i()()()),o&2){let a=u();s(5),M(a.username)}}function re(o,c){if(o&1){let a=b();n(0,"div",25)(1,"ion-input",26),w("ngModelChange",function(e){p(a);let t=u();return S(t.username,e)||(t.username=e),f(e)}),i()()}if(o&2){let a=u();s(),O("ngModel",a.username),l("disabled",a.savingUsername)}}function ae(o,c){if(o&1){let a=b();C(0),n(1,"ion-button",27),m("click",function(){p(a);let e=u();return f(e.toggleEditUsername())}),g(2," Editar "),i(),P()}}function se(o,c){o&1&&d(0,"ion-spinner",33)}function ce(o,c){o&1&&d(0,"ion-icon",34)}function le(o,c){if(o&1){let a=b();C(0),n(1,"ion-button",28),m("click",function(){p(a);let e=u();return f(e.guardarPerfil())}),h(2,se,1,0,"ion-spinner",29)(3,ce,1,0,"ion-icon",30),i(),n(4,"ion-button",31),m("click",function(){p(a);let e=u();return f(e.toggleEditUsername())}),d(5,"ion-icon",32),i(),P()}if(o&2){let a=u();s(),l("disabled",a.savingUsername),s(),l("ngIf",a.savingUsername),s(),l("ngIf",!a.savingUsername),s(),l("disabled",a.savingUsername)}}var Ce=(()=>{let c=class c{constructor(r,e,t){this.router=r,this.themeService=e,this.usuarioService=t,this.username="",this.originalUsername="",this.editingUsername=!1,this.savingUsername=!1,this.darkMode=!1,this.isToastOpen=!1,this.toastMessage="",this.toastColor="success",this.subscriptions=[],J({personOutline:ee,saveOutline:te,closeOutline:X,lockClosedOutline:Z,chevronForwardOutline:Q,mailOutline:$,arrowBackOutline:K})}ngOnInit(){let r=this.themeService.isDarkMode().subscribe(e=>{this.darkMode=e});this.subscriptions.push(r),this.loadUserData()}ngOnDestroy(){this.subscriptions.forEach(r=>r.unsubscribe())}loadUserData(){let r=localStorage.getItem("idUsuario");if(!r){this.showToast("No se encontr\xF3 el ID de usuario","danger");return}let e=this.usuarioService.obtenerUsuarioPorId(r).subscribe({next:t=>{this.username=t.username,this.originalUsername=t.username},error:t=>{console.error("Error al cargar datos del usuario:",t),this.showToast("Error al cargar datos del usuario","danger")}});this.subscriptions.push(e)}toggleEditUsername(){this.editingUsername&&(this.username=this.originalUsername),this.editingUsername=!this.editingUsername}guardarPerfil(){if(!this.username.trim()){this.showToast("El nombre de usuario no puede estar vac\xEDo","warning");return}if(this.username===this.originalUsername){this.editingUsername=!1;return}this.savingUsername=!0;let r=this.usuarioService.actualizarPerfil({username:this.username.trim()}).subscribe({next:e=>{this.savingUsername=!1,this.editingUsername=!1,this.originalUsername=this.username,console.log("Perfil actualizado:",e),this.showToast("Perfil actualizado correctamente","success")},error:e=>{this.savingUsername=!1,console.error("Error al actualizar perfil:",e),this.showToast("Error al actualizar el perfil","danger")}});this.subscriptions.push(r)}navigateToChangePassword(){this.router.navigate(["/menu/settings/change-password"])}navigateToChangeEmail(){this.router.navigate(["/menu/settings/change-email"])}showToast(r,e){this.toastMessage=r,this.toastColor=e,this.isToastOpen=!0}onToastDismiss(){this.isToastOpen=!1}goBack(){this.router.navigate(["/menu/inicio"])}};c.\u0275fac=function(e){return new(e||c)(_(E),_(ne),_(ie))},c.\u0275cmp=k({type:c,selectors:[["app-settings"]],decls:43,vars:13,consts:[["slot","start"],["defaultHref","/menu/inicio",3,"click"],["id","main-content",3,"fullscreen"],[1,"content-container"],[1,"page-header"],[1,"header-icon"],["name","person-outline"],[1,"page-title"],[1,"page-subtitle"],[1,"settings-section"],[1,"section-title"],[1,"settings-list"],["lines","full",1,"settings-item"],["name","person-outline","slot","start",1,"settings-icon"],["class","settings-content",4,"ngIf"],["class","settings-edit",4,"ngIf"],["slot","end",1,"settings-actions"],[4,"ngIf"],["lines","full","button","","detail","",1,"settings-item",3,"click"],["name","lock-closed-outline","slot","start",1,"settings-icon"],["name","chevron-forward-outline","slot","end",1,"forward-icon"],["lines","none","button","","detail","",1,"settings-item",3,"click"],["name","mail-outline","slot","start",1,"settings-icon"],["position","top",3,"didDismiss","isOpen","message","duration","color"],[1,"settings-content"],[1,"settings-edit"],["ngDefaultControl","","placeholder","Nombre de usuario",1,"username-input",3,"ngModelChange","ngModel","disabled"],["fill","clear",1,"edit-button",3,"click"],["fill","clear",1,"save-button",3,"click","disabled"],["name","crescent",4,"ngIf"],["name","save-outline",4,"ngIf"],["fill","clear",1,"cancel-button",3,"click","disabled"],["name","close-outline"],["name","crescent"],["name","save-outline"]],template:function(e,t){e&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-back-button",1),m("click",function(){return t.goBack()}),i()(),n(4,"ion-title"),g(5,"Configuraci\xF3n"),i()()(),n(6,"ion-content",2)(7,"div",3)(8,"div",4)(9,"div",5),d(10,"ion-icon",6),i(),n(11,"h1",7),g(12,"Configuraci\xF3n de Cuenta"),i(),n(13,"p",8),g(14,"Gestiona tu informaci\xF3n personal y preferencias"),i()(),n(15,"div",9)(16,"h2",10),g(17,"Cuenta"),i(),n(18,"ion-list",11)(19,"ion-item",12),d(20,"ion-icon",13),h(21,oe,6,1,"div",14)(22,re,2,2,"div",15),n(23,"div",16),h(24,ae,3,0,"ng-container",17)(25,le,6,4,"ng-container",17),i()(),n(26,"ion-item",18),m("click",function(){return t.navigateToChangePassword()}),d(27,"ion-icon",19),n(28,"ion-label")(29,"h3"),g(30,"Cambiar contrase\xF1a"),i(),n(31,"p"),g(32,"Actualiza tu contrase\xF1a de acceso"),i()(),d(33,"ion-icon",20),i(),n(34,"ion-item",21),m("click",function(){return t.navigateToChangeEmail()}),d(35,"ion-icon",22),n(36,"ion-label")(37,"h3"),g(38,"Cambiar correo electr\xF3nico"),i(),n(39,"p"),g(40,"Actualiza tu direcci\xF3n de email"),i()(),d(41,"ion-icon",20),i()()()(),n(42,"ion-toast",23),m("didDismiss",function(){return t.onToastDismiss()}),i()()),e&2&&(s(),v("dark-mode",t.darkMode),s(5),v("dark-mode",t.darkMode),l("fullscreen",!0),s(15),l("ngIf",!t.editingUsername),s(),l("ngIf",t.editingUsername),s(2),l("ngIf",!t.editingUsername),s(),l("ngIf",t.editingUsername),s(17),l("isOpen",t.isToastOpen)("message",t.toastMessage)("duration",3e3)("color",t.toastColor))},dependencies:[B,V,W,Y,F,L,q,A,G,N,j,H,R,T,I,D,U,y,z],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: var(--background-color);font-family:Poppins,sans-serif}.content-container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.page-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding:24px 20px;background:linear-gradient(135deg,var(--primary-color),#f0a6c6);border-radius:20px;color:#fff;position:relative;overflow:hidden}.page-header[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(255,255,255,.1) 0%,transparent 70%);animation:_ngcontent-%COMP%_shimmer 4s ease-in-out infinite}@keyframes _ngcontent-%COMP%_shimmer{0%,to{transform:translate(-100%) translateY(-100%) rotate(0)}50%{transform:translate(0) translateY(0) rotate(180deg)}}.header-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background:#fff3;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:center;margin:0 auto 16px;position:relative;z-index:2}.header-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:30px;color:#fff}.page-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;margin:0 0 8px;text-shadow:0 2px 4px rgba(0,0,0,.3);position:relative;z-index:2}.page-subtitle[_ngcontent-%COMP%]{font-size:14px;margin:0;opacity:.9;text-shadow:0 1px 2px rgba(0,0,0,.3);position:relative;z-index:2}.settings-section[_ngcontent-%COMP%]{margin-bottom:32px}.section-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:var(--text-color);margin:0 0 16px;padding-left:16px;position:relative}.section-title[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:50%;transform:translateY(-50%);width:4px;height:20px;background:var(--primary-color);border-radius:2px}.settings-list[_ngcontent-%COMP%]{background:var(--card-background);border-radius:16px;overflow:hidden;box-shadow:0 4px 12px #0000001a}.settings-item[_ngcontent-%COMP%]{--background: var(--card-background);--color: var(--text-color);--border-color: var(--border-color);--padding-start: 16px;--padding-end: 16px;--inner-padding-end: 8px}.settings-item[_ngcontent-%COMP%]:hover{--background: var(--hover-background)}.settings-icon[_ngcontent-%COMP%]{font-size:20px;color:var(--primary-color);margin-right:16px}.settings-content[_ngcontent-%COMP%]{flex:1}.settings-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:var(--text-color);margin:0 0 4px}.settings-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--text-muted);margin:0}.settings-edit[_ngcontent-%COMP%]{flex:1}.settings-edit[_ngcontent-%COMP%]   .username-input[_ngcontent-%COMP%]{--color: var(--text-color);--placeholder-color: var(--text-muted);font-size:16px}.settings-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.edit-button[_ngcontent-%COMP%]{--color: var(--primary-color)}.save-button[_ngcontent-%COMP%]{--color: #2dd36f}.save-button[_ngcontent-%COMP%]:hover{--background: rgba(45, 211, 111, .1)}.cancel-button[_ngcontent-%COMP%]{--color: #eb445a}.cancel-button[_ngcontent-%COMP%]:hover{--background: rgba(235, 68, 90, .1)}.forward-icon[_ngcontent-%COMP%]{color:var(--text-muted);font-size:16px}[_nghost-%COMP%]{--background-color: #f5f5f5;--card-background: #ffffff;--text-color: #333333;--text-muted: #666666;--primary-color: #e491b4;--border-color: rgba(0, 0, 0, .1);--hover-background: #f8f9fa}.dark-mode[_ngcontent-%COMP%]{--background-color: #121212;--card-background: #1e1e1e;--text-color: #ffffff;--text-muted: #aaaaaa;--border-color: rgba(255, 255, 255, .1);--hover-background: #2a2a2a}@media (max-width: 768px){.content-container[_ngcontent-%COMP%]{padding:16px}.page-header[_ngcontent-%COMP%]{padding:20px 16px;margin-bottom:24px}.page-title[_ngcontent-%COMP%]{font-size:20px}.settings-actions[_ngcontent-%COMP%]{flex-direction:column;gap:4px}}']});let o=c;return o})();export{Ce as SettingsPage};
