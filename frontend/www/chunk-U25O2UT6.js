import{a as $}from"./chunk-5YXOTIYF.js";import"./chunk-MR5KIQS6.js";import{c as U,d as P,f as _,g as M}from"./chunk-FFJHRTPG.js";import{K as W,a as J,e as K,i as Q}from"./chunk-APCY6S75.js";import{$ as F,A as r,B as a,C as v,Ca as Y,G as u,Ha as V,Ia as D,Ka as G,M as d,Z as y,_a as B,ab as R,bb as q,cb as H,fa as w,ja as h,k as f,ka as I,la as S,ma as T,na as C,pa as E,qa as L,r as l,ra as A,sa as j,ta as z,u as k,v as b,x as c,ya as N,z as p}from"./chunk-7KKY7EE3.js";import"./chunk-B6B5UJKW.js";import"./chunk-ZGM7264U.js";import"./chunk-YKTCUWBK.js";import"./chunk-WS3OVXI4.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-OWSRRI5Z.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{f as O}from"./chunk-RW4GY4BD.js";function X(s,m){s&1&&(r(0,"div",19),d(1," Por favor, introduce un email v\xE1lido "),a()),s&2&&c("@fadeInOut",void 0)}function Z(s,m){s&1&&(r(0,"div",19),d(1," La contrase\xF1a debe tener al menos 6 caracteres "),a()),s&2&&c("@fadeInOut",void 0)}var vt=(()=>{let m=class m{constructor(){this.formSubmitAttempt=!1,this.cardAnimated=!1,this.darkMode=!1,this.loginService=f($),this.router=f(w),this.toastController=f(R),this.animationCtrl=f(B),this.loginForm=new T({email:new C("",[h.required,h.email]),password:new C("",[h.required,h.minLength(6)])}),J({checkmarkCircle:K,closeCircle:Q,sunnyOutline:W});let e=localStorage.getItem("darkMode");this.darkMode=e==="true"}ionViewDidEnter(){this.cardAnimated=!0}ngOnInit(){}toggleTheme(){this.darkMode=!this.darkMode,localStorage.setItem("darkMode",this.darkMode.toString())}isFieldValid(e){var n,t,o,i;return((t=(n=this.loginForm.get(e))==null?void 0:n.valid)!=null?t:!1)&&((i=(o=this.loginForm.get(e))==null?void 0:o.touched)!=null?i:!1)}isFieldInvalid(e){var n,t,o,i,g,x;return((t=(n=this.loginForm.get(e))==null?void 0:n.invalid)!=null?t:!1)&&((i=(o=this.loginForm.get(e))==null?void 0:o.touched)!=null?i:!1)||((x=(g=this.loginForm.get(e))==null?void 0:g.invalid)!=null?x:!1)&&this.formSubmitAttempt}isFieldTouched(e){var n;return((n=this.loginForm.get(e))==null?void 0:n.touched)||this.formSubmitAttempt}validateField(e){let n=this.loginForm.get(e);n&&n.markAsTouched()}login(){var t,o;this.formSubmitAttempt=!0;let e=(t=this.loginForm.get("email"))==null?void 0:t.value,n=(o=this.loginForm.get("password"))==null?void 0:o.value;this.loginForm.valid&&this.validarEmail(e)?this.loginService.login(e,n).subscribe({next:i=>{console.log("Login successful:",i),i.token?(console.log("Login successful:",i),this.loginService.guardarToken(i.token),this.cardAnimated=!1,setTimeout(()=>{this.router.navigate(["/menu"])},300)):this.mensajeToast("Login error: Email o contrase\xF1a incorrectos")},error:i=>{this.mensajeToast("Login error: Email o contrase\xF1a incorrectos")}}):this.validarEmail(e)?Object.keys(this.loginForm.controls).forEach(i=>{let g=this.loginForm.get(i);g==null||g.markAsTouched()}):this.mensajeToast("Invalid email.")}validarEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}mensajeToast(e){return O(this,null,function*(){yield(yield this.toastController.create({message:e,duration:2e3,color:"danger",position:"bottom",cssClass:"custom-toast"})).present()})}registrarse(){this.cardAnimated=!1,setTimeout(()=>{this.router.navigate(["/register"])},300)}};m.\u0275fac=function(n){return new(n||m)},m.\u0275cmp=k({type:m,selectors:[["app-login"]],decls:28,vars:20,consts:[[3,"fullscreen"],[1,"theme-toggle",3,"click"],[3,"name"],[1,"content-container"],[1,"login-card"],[1,"logo-container"],["src","../../assets/img/logo.png","alt","Logo"],[3,"ngSubmit","formGroup"],[1,"welcome-title"],[1,"form-item"],["label","Email","labelPlacement","floating","fill","outline","formControlName","email",1,"custom-input",3,"ionInput"],["class","error-message",4,"ngIf"],["label","Contrase\xF1a","labelPlacement","floating","fill","outline","type","password","formControlName","password",1,"custom-input",3,"ionInput"],["slot","end","color","pink"],[1,"forgot-password"],[1,"button-container"],["expand","full","shape","round","type","submit",1,"submit-button",3,"disabled"],[1,"register-link"],[3,"click"],[1,"error-message"]],template:function(n,t){n&1&&(r(0,"ion-content",0)(1,"div",1),u("click",function(){return t.toggleTheme()}),v(2,"ion-icon",2),a(),r(3,"div",3)(4,"div",4)(5,"div",5),v(6,"img",6),a(),r(7,"form",7),u("ngSubmit",function(){return t.login()}),r(8,"h2",8),d(9,"\xA1Bienvenido!"),a(),r(10,"ion-item",9)(11,"ion-input",10),u("ionInput",function(){return t.validateField("email")}),a()(),b(12,X,2,1,"div",11),r(13,"ion-item",9)(14,"ion-input",12),u("ionInput",function(){return t.validateField("password")}),v(15,"ion-input-password-toggle",13),a()(),b(16,Z,2,1,"div",11),r(17,"div",14)(18,"ion-label"),d(19,"\xBFOlvidaste tu contrase\xF1a?"),a()(),r(20,"div",15)(21,"ion-button",16),d(22," Iniciar sesi\xF3n "),a()(),r(23,"div",17)(24,"ion-label"),d(25," \xBFNo tienes una cuenta? "),r(26,"span",18),u("click",function(){return t.registrarse()}),d(27,"Reg\xEDstrate"),a()()()()()()()),n&2&&(p("dark-mode",t.darkMode),c("fullscreen",!0),l(2),c("name",t.darkMode?"sunny-outline":"moon-outline"),l(2),p("animate-in",t.cardAnimated),l(3),c("formGroup",t.loginForm),l(3),p("valid-input",t.isFieldValid("email"))("invalid-input",t.isFieldInvalid("email")),l(2),c("ngIf",t.isFieldInvalid("email")&&t.isFieldTouched("email")),l(),p("valid-input",t.isFieldValid("password"))("invalid-input",t.isFieldInvalid("password")),l(3),c("ngIf",t.isFieldInvalid("password")&&t.isFieldTouched("password")),l(5),p("button-shake",t.formSubmitAttempt&&t.loginForm.invalid),c("disabled",t.loginForm.invalid))},dependencies:[D,G,N,Y,F,y,j,E,I,S,z,L,A,V,H,q],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: var(--background-color);font-family:Poppins,sans-serif;transition:all .3s ease}.theme-toggle[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;z-index:100;background-color:var(--card-background);border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 10px #0000001a;cursor:pointer;transition:all .3s ease}.theme-toggle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--primary-color)}.content-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;padding:20px}.login-card[_ngcontent-%COMP%]{background-color:var(--card-background);border-radius:16px;padding:30px 20px;width:100%;max-width:400px;box-shadow:var(--card-shadow);transition:all .3s ease;opacity:0;transform:translateY(20px)}.animate-in[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;height:auto;transition:all .3s ease}.welcome-title[_ngcontent-%COMP%]{color:var(--primary-color);font-family:Montserrat,sans-serif;font-size:28px;font-weight:600;text-align:center;margin-bottom:25px;transition:color .3s ease}ion-item.form-item[_ngcontent-%COMP%]{--background: transparent;--border-color: transparent;--border-width: 0;--inner-border-width: 0;--padding-start: 0;--padding-end: 0;--min-height: 70px;margin-bottom:20px;position:relative}.custom-input[_ngcontent-%COMP%]{--background: var(--input-background, #f0f0f0);--color: var(--input-text, #333333);--placeholder-color: var(--input-placeholder, #9e9e9e);--border-radius: 8px;--padding-start: 15px;--padding-end: 15px;--padding-top: 0;--padding-bottom: 0;--highlight-color: var(--primary-color, #e491b4)}.custom-input[_ngcontent-%COMP%]::part(native){padding-top:0;padding-bottom:0;min-height:48px;display:flex;align-items:center}ion-input.has-focus[_ngcontent-%COMP%]::part(label), ion-input.has-value[_ngcontent-%COMP%]::part(label){transform:translateY(-12px) scale(.75)}ion-input[_ngcontent-%COMP%]::part(input){margin-top:0;margin-bottom:0;height:100%;display:flex;align-items:center}.valid-input[_ngcontent-%COMP%]   .custom-input[_ngcontent-%COMP%]{--border-color: var(--success-color);--highlight-color: var(--success-color)}.invalid-input[_ngcontent-%COMP%]   .custom-input[_ngcontent-%COMP%]{--border-color: var(--error-color);--highlight-color: var(--error-color)}.validation-icon[_ngcontent-%COMP%]{position:absolute;right:40px;top:50%;transform:translateY(-50%);z-index:10}.validation-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;transition:all .3s ease}.validation-icon[_ngcontent-%COMP%]   ion-icon[name=checkmark-circle][_ngcontent-%COMP%]{color:var(--success-color)}.validation-icon[_ngcontent-%COMP%]   ion-icon[name=close-circle][_ngcontent-%COMP%]{color:var(--error-color)}.error-message[_ngcontent-%COMP%]{color:var(--error-color);font-size:12px;margin-top:-15px;margin-bottom:15px;padding-left:15px;text-align:left}.forgot-password[_ngcontent-%COMP%]{text-align:center;margin-bottom:25px}.forgot-password[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--primary-color);font-size:14px;font-weight:500;cursor:pointer;transition:color .3s ease}.button-container[_ngcontent-%COMP%]{margin-bottom:20px}ion-button[_ngcontent-%COMP%]{--background: var(--primary-color);--background-hover: var(--primary-color-hover);--color: #ffffff;--border-radius: 50px;--padding-top: 15px;--padding-bottom: 15px;font-weight:600;text-transform:uppercase;letter-spacing:1px;transition:all .3s ease;overflow:hidden}.submit-button[_ngcontent-%COMP%]{position:relative}.submit-button[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;width:5px;height:5px;background:#ffffff80;opacity:0;border-radius:100%;transform:scale(1) translate(-50%);transform-origin:50% 50%}.submit-button[_ngcontent-%COMP%]:focus:not(:active):after{animation:_ngcontent-%COMP%_ripple 1s ease-out}.button-shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .5s cubic-bezier(.36,.07,.19,.97) both}.register-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]{text-align:center}.register-link[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--text-color);font-size:14px;transition:color .3s ease}.register-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600;cursor:pointer;transition:color .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}@keyframes _ngcontent-%COMP%_ripple{0%{transform:scale(0);opacity:1}20%{transform:scale(25);opacity:1}to{opacity:0;transform:scale(40)}}'],data:{animation:[U("fadeInOut",[M(":enter",[_({opacity:0,transform:"translateY(-10px)"}),P("200ms ease-out",_({opacity:1,transform:"translateY(0)"}))]),M(":leave",[P("200ms ease-in",_({opacity:0,transform:"translateY(-10px)"}))])])]}});let s=m;return s})();export{vt as LoginPage};
