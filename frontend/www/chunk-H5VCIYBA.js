import{c as H,d as M,f as b,g as C}from"./chunk-FFJHRTPG.js";import{a as $}from"./chunk-GHRV4RSQ.js";import"./chunk-BNQ67AVA.js";import{Aa as I,Bb as z,Dc as K,F as l,Fd as W,Ga as k,J as y,Jb as V,Kc as Q,M as v,Na as u,O as c,Oa as T,Pa as S,Q as p,Qa as E,Rb as L,S as r,Sa as _,Sb as G,T as a,U as P,Ua as A,Ub as q,Va as R,Wa as j,Z as g,ab as N,bb as Y,ga as m,nc as D,qc as U,sc as B,t as h,wc as J,xa as x}from"./chunk-XCE7OHUN.js";import"./chunk-CKJMNUPD.js";import"./chunk-B6B5UJKW.js";import"./chunk-ZGM7264U.js";import"./chunk-YKTCUWBK.js";import"./chunk-WS3OVXI4.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-OWSRRI5Z.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{f as F}from"./chunk-RW4GY4BD.js";function X(o,d){o&1&&(r(0,"div",18),m(1," El nombre de usuario es obligatorio "),a()),o&2&&c("@fadeInOut",void 0)}function Z(o,d){o&1&&(r(0,"div",18),m(1," Por favor, introduce un email v\xE1lido "),a()),o&2&&c("@fadeInOut",void 0)}function ee(o,d){o&1&&(r(0,"div",18),m(1," La contrase\xF1a debe tener al menos 6 caracteres "),a()),o&2&&c("@fadeInOut",void 0)}function te(o,d){o&1&&(r(0,"div",18),m(1," Las contrase\xF1as no coinciden "),a()),o&2&&c("@fadeInOut",void 0)}var be=(()=>{let d=class d{constructor(){this.passwordMismatch=!1,this.formSubmitAttempt=!1,this.cardAnimated=!1,this.darkMode=!1,this.loginService=h($),this.router=h(k),this.toastController=h(U),this.animationCtrl=h(D),this.registerForm=new E({username:new _("",[u.required]),email:new _("",[u.required,u.email]),password:new _("",[u.required,u.minLength(6)]),confirmPassword:new _("",[u.required])}),J({checkmarkCircle:K,closeCircle:Q,sunnyOutline:W});let t=localStorage.getItem("darkMode");this.darkMode=t==="true"}ngOnInit(){}ionViewDidEnter(){this.cardAnimated=!0}toggleTheme(){this.darkMode=!this.darkMode,localStorage.setItem("darkMode",this.darkMode.toString())}isFieldValid(t){var n,e,i,s;return((e=(n=this.registerForm.get(t))==null?void 0:n.valid)!=null?e:!1)&&((s=(i=this.registerForm.get(t))==null?void 0:i.touched)!=null?s:!1)}isFieldInvalid(t){var n,e,i,s,f,w,O;return((e=(n=this.registerForm.get(t))==null?void 0:n.invalid)!=null?e:!1)&&((s=(i=this.registerForm.get(t))==null?void 0:i.touched)!=null?s:!1)||((w=(f=this.registerForm.get(t))==null?void 0:f.invalid)!=null?w:!1)&&((O=this.formSubmitAttempt)!=null?O:!1)}isFieldTouched(t){var n;return((n=this.registerForm.get(t))==null?void 0:n.touched)||this.formSubmitAttempt}validateField(t){let n=this.registerForm.get(t);n&&n.markAsTouched()}checkPasswordMatch(){var e,i;let t=(e=this.registerForm.get("password"))==null?void 0:e.value,n=(i=this.registerForm.get("confirmPassword"))==null?void 0:i.value;this.passwordMismatch=t!==n&&n!==""}iniciarSesion(){this.cardAnimated=!1,setTimeout(()=>{this.router.navigate(["/login"])},300)}register(){var n,e,i;this.formSubmitAttempt=!0,this.checkPasswordMatch();let t={username:(n=this.registerForm.get("username"))==null?void 0:n.value,email:(e=this.registerForm.get("email"))==null?void 0:e.value,password:(i=this.registerForm.get("password"))==null?void 0:i.value};console.log("Usuario a registrar:",t),this.registerForm.valid&&this.validarEmail(t.email)&&!this.passwordMismatch?this.loginService.register(t).subscribe({next:s=>{s.message==="Usuario registrado con \xE9xito."?(this.mensajeToast("Usuario registrado correctamente. Por favor, inicie sesi\xF3n.","success"),this.cardAnimated=!1,setTimeout(()=>{this.router.navigate(["/login"])},300)):this.mensajeToast(s.message)},error:s=>{console.error("Error HTTP en registro:",s),this.mensajeToast("Ocurri\xF3 un error inesperado al intentar registrar el usuario. Por favor, intente m\xE1s tarde.","danger")}}):this.validarEmail(t.email)?this.passwordMismatch?this.mensajeToast("Las contrase\xF1as no coinciden."):(Object.keys(this.registerForm.controls).forEach(s=>{let f=this.registerForm.get(s);f==null||f.markAsTouched()}),this.mensajeToast("Por favor, complete todos los campos correctamente.")):this.mensajeToast("Email inv\xE1lido.")}validarEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}mensajeToast(t,n="danger"){return F(this,null,function*(){yield(yield this.toastController.create({message:t,duration:2e3,color:n,position:"bottom",cssClass:"custom-toast"})).present()})}};d.\u0275fac=function(n){return new(n||d)},d.\u0275cmp=y({type:d,selectors:[["app-register"]],decls:30,vars:29,consts:[[3,"fullscreen"],[1,"content-container"],[1,"login-card"],[1,"logo-container"],["src","../../assets/img/logo.png","alt","Logo"],[3,"ngSubmit","formGroup"],[1,"welcome-title"],[1,"form-item"],["label","Nombre de usuario","labelPlacement","floating","fill","outline","formControlName","username",1,"custom-input",3,"ionInput"],["class","error-message",4,"ngIf"],["label","Correo electr\xF3nico","labelPlacement","floating","fill","outline","type","email","formControlName","email",1,"custom-input",3,"ionInput"],["label","Contrase\xF1a","labelPlacement","floating","fill","outline","type","password","formControlName","password",1,"custom-input",3,"ionInput"],["slot","end"],["label","Confirmar contrase\xF1a","labelPlacement","floating","fill","outline","type","password","formControlName","confirmPassword",1,"custom-input",3,"ionInput"],[1,"button-container"],["expand","full","shape","round","type","submit",1,"submit-button",3,"disabled"],[1,"login-link"],[3,"click"],[1,"error-message"]],template:function(n,e){n&1&&(r(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"div",3),P(4,"img",4),a(),r(5,"form",5),g("ngSubmit",function(){return e.register()}),r(6,"h2",6),m(7,"Crear Cuenta"),a(),r(8,"ion-item",7)(9,"ion-input",8),g("ionInput",function(){return e.validateField("username")}),a()(),v(10,X,2,1,"div",9),r(11,"ion-item",7)(12,"ion-input",10),g("ionInput",function(){return e.validateField("email")}),a()(),v(13,Z,2,1,"div",9),r(14,"ion-item",7)(15,"ion-input",11),g("ionInput",function(){return e.validateField("password"),e.checkPasswordMatch()}),P(16,"ion-input-password-toggle",12),a()(),v(17,ee,2,1,"div",9),r(18,"ion-item",7)(19,"ion-input",13),g("ionInput",function(){return e.validateField("confirmPassword"),e.checkPasswordMatch()}),P(20,"ion-input-password-toggle",12),a()(),v(21,te,2,1,"div",9),r(22,"div",14)(23,"ion-button",15),m(24," Registrarse "),a()(),r(25,"div",16)(26,"ion-label"),m(27," \xBFYa tienes una cuenta? "),r(28,"span",17),g("click",function(){return e.iniciarSesion()}),m(29,"Iniciar sesi\xF3n"),a()()()()()()()),n&2&&(p("dark-mode",e.darkMode),c("fullscreen",!0),l(2),p("animate-in",e.cardAnimated),l(3),c("formGroup",e.registerForm),l(3),p("valid-input",e.isFieldValid("username"))("invalid-input",e.isFieldInvalid("username")),l(2),c("ngIf",e.isFieldInvalid("username")&&e.isFieldTouched("username")),l(),p("valid-input",e.isFieldValid("email"))("invalid-input",e.isFieldInvalid("email")),l(2),c("ngIf",e.isFieldInvalid("email")&&e.isFieldTouched("email")),l(),p("valid-input",e.isFieldValid("password"))("invalid-input",e.isFieldInvalid("password")),l(3),c("ngIf",e.isFieldInvalid("password")&&e.isFieldTouched("password")),l(),p("valid-input",e.isFieldValid("confirmPassword")&&!e.passwordMismatch)("invalid-input",e.isFieldInvalid("confirmPassword")||e.passwordMismatch),l(3),c("ngIf",e.passwordMismatch&&e.isFieldTouched("confirmPassword")),l(2),p("button-shake",e.formSubmitAttempt&&(e.registerForm.invalid||e.passwordMismatch)),c("disabled",e.registerForm.invalid||e.passwordMismatch))},dependencies:[z,q,G,V,I,x,N,A,T,S,L,Y,R,j,B],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: var(--background-color);font-family:Poppins,sans-serif;transition:all .3s ease}.theme-toggle[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;z-index:100;background-color:var(--card-background);border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 10px #0000001a;cursor:pointer;transition:all .3s ease}.theme-toggle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--primary-color)}.content-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;padding:20px}.login-card[_ngcontent-%COMP%]{background-color:var(--card-background);border-radius:16px;padding:30px 20px;width:100%;max-width:400px;box-shadow:var(--card-shadow);transition:all .3s ease;opacity:0;transform:translateY(20px)}.animate-in[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;height:auto;transition:all .3s ease}.welcome-title[_ngcontent-%COMP%]{color:var(--primary-color);font-family:Montserrat,sans-serif;font-size:28px;font-weight:600;text-align:center;margin-bottom:25px;transition:color .3s ease}ion-item.form-item[_ngcontent-%COMP%]{--background: transparent;--border-color: transparent;--border-width: 0;--inner-border-width: 0;--padding-start: 0;--padding-end: 0;--min-height: 70px;margin-bottom:20px;position:relative}.custom-input[_ngcontent-%COMP%]{--background: var(--input-background, #f0f0f0);--color: var(--input-text, #333333);--placeholder-color: var(--input-placeholder, #9e9e9e);--border-radius: 8px;--padding-start: 15px;--padding-end: 15px;--padding-top: 0;--padding-bottom: 0;--highlight-color: var(--primary-color, #e491b4)}.custom-input[_ngcontent-%COMP%]::part(native){padding-top:0;padding-bottom:0;min-height:48px;display:flex;align-items:center;line-height:48px}ion-input.has-focus[_ngcontent-%COMP%]::part(label), ion-input.has-value[_ngcontent-%COMP%]::part(label){transform:translateY(-12px) scale(.75)}ion-input[_ngcontent-%COMP%]::part(input){margin-top:0;margin-bottom:0;height:100%;display:flex;align-items:center;line-height:normal}.valid-input[_ngcontent-%COMP%]   .custom-input[_ngcontent-%COMP%]{--border-color: var(--success-color);--highlight-color: var(--success-color)}.invalid-input[_ngcontent-%COMP%]   .custom-input[_ngcontent-%COMP%]{--border-color: var(--error-color);--highlight-color: var(--error-color)}.validation-icon[_ngcontent-%COMP%]{position:absolute;right:15px;top:50%;transform:translateY(-50%);z-index:10}.validation-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;transition:all .3s ease}.validation-icon[_ngcontent-%COMP%]   ion-icon[name=checkmark-circle][_ngcontent-%COMP%]{color:var(--success-color)}.validation-icon[_ngcontent-%COMP%]   ion-icon[name=close-circle][_ngcontent-%COMP%]{color:var(--error-color)}.error-message[_ngcontent-%COMP%]{color:var(--error-color);font-size:12px;margin-top:-15px;margin-bottom:15px;padding-left:15px;text-align:left}.forgot-password[_ngcontent-%COMP%]{text-align:right;margin-bottom:25px}.forgot-password[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--primary-color);font-size:14px;font-weight:500;cursor:pointer;transition:color .3s ease}.button-container[_ngcontent-%COMP%]{margin-bottom:20px}ion-button[_ngcontent-%COMP%]{--background: var(--primary-color);--background-hover: var(--primary-color-hover);--color: #ffffff;--border-radius: 50px;--padding-top: 15px;--padding-bottom: 15px;font-weight:600;text-transform:uppercase;letter-spacing:1px;transition:all .3s ease;overflow:hidden}.submit-button[_ngcontent-%COMP%]{position:relative}.submit-button[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;width:5px;height:5px;background:#ffffff80;opacity:0;border-radius:100%;transform:scale(1) translate(-50%);transform-origin:50% 50%}.submit-button[_ngcontent-%COMP%]:focus:not(:active):after{animation:_ngcontent-%COMP%_ripple 1s ease-out}.button-shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .5s cubic-bezier(.36,.07,.19,.97) both}.register-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]{text-align:center}.register-link[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--text-color);font-size:14px;transition:color .3s ease}.register-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600;cursor:pointer;transition:color .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}@keyframes _ngcontent-%COMP%_ripple{0%{transform:scale(0);opacity:1}20%{transform:scale(25);opacity:1}to{opacity:0;transform:scale(40)}}'],data:{animation:[H("fadeInOut",[C(":enter",[b({opacity:0,transform:"translateY(-10px)"}),M("200ms ease-out",b({opacity:1,transform:"translateY(0)"}))]),C(":leave",[M("200ms ease-in",b({opacity:0,transform:"translateY(-10px)"}))])])]}});let o=d;return o})();export{be as RegisterPage};
