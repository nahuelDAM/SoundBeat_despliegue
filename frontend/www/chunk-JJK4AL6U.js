import{b as Be}from"./chunk-NLCILDIZ.js";import"./chunk-3J7GGTVR.js";import{a as $e}from"./chunk-7RXKWNF4.js";import{a as A}from"./chunk-BNQ67AVA.js";import{$a as ee,Aa as q,Bb as ae,Cb as re,Cc as Oe,Cd as Ae,Db as se,Dd as Ue,Ea as H,Eb as ce,F as s,Fb as le,Fc as ye,Ga as L,Gb as me,Gd as Re,H as P,Hb as de,Id as je,J as R,Jb as z,La as Q,Lc as we,M as x,Nc as Ee,O as l,Oa as W,Ob as pe,P as j,Pa as G,Pc as ke,Q as C,Ra as J,S as o,Sb as ge,T as r,Ta as K,U as p,Ua as X,Ub as ue,Vc as Se,Y as M,Yb as _e,Z as h,Za as Z,Zb as fe,_ as g,ab as te,ca as k,cc as xe,da as S,ea as I,f as y,fd as Ie,ga as m,gc as he,ha as b,hc as Ce,ia as O,ic as be,ka as $,kd as De,la as D,ma as T,na as V,nd as Te,pa as F,pd as Ve,qd as Fe,r as U,rc as ve,sb as ne,tb as ie,v as _,va as B,w as f,wa as Y,wc as Pe,xa as N,xb as oe,yc as Me,yd as ze}from"./chunk-XCE7OHUN.js";import{d as w}from"./chunk-CKJMNUPD.js";import"./chunk-B6B5UJKW.js";import"./chunk-ZGM7264U.js";import"./chunk-YKTCUWBK.js";import"./chunk-WS3OVXI4.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-OWSRRI5Z.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{a as E}from"./chunk-RW4GY4BD.js";var Ye=(()=>{let c=class c{constructor(){this.baseUrlSamples=`${A.URLbase}/api/samples`,this.baseUrlComentarios=`${A.URLbase}/api/comentarios`}_getAuthHeaders(){let n=localStorage.getItem("token"),t={"Content-Type":"application/json"};return n&&(t.Authorization=`Bearer ${n}`),t}getSampleDetails(n){let t=`${this.baseUrlSamples}/${n}/details`;return y(w.get({url:t,headers:this._getAuthHeaders()}).then(i=>i.data))}crearComentario(n,t){let i=`${this.baseUrlSamples}/${n}/comentarios`,d=this._getAuthHeaders();return console.log("Cabeceras que se van a enviar:",d),y(w.post({url:i,headers:this._getAuthHeaders(),data:t}).then(u=>u.data))}modificarComentario(n,t){let i=`${this.baseUrlComentarios}/${n}`;return y(w.put({url:i,headers:this._getAuthHeaders(),data:t}).then(d=>d.data))}eliminarComentario(n){let t=`${this.baseUrlComentarios}/${n}`;return y(w.delete({url:t,headers:this._getAuthHeaders()}).then(i=>i.data))}};c.\u0275fac=function(t){return new(t||c)},c.\u0275prov=U({token:c,factory:c.\u0275fac,providedIn:"root"});let a=c;return a})();var Qe=["editModal"],We=["miComentarioTextarea"],Ne=()=>[1,2,3,4,5];function Ge(a,c){a&1&&(o(0,"div",13),p(1,"ion-spinner",14),o(2,"p"),m(3,"Cargando detalles..."),r()())}function Je(a,c){if(a&1&&(o(0,"ion-chip",44),m(1),r()),a&2){let e=g(2);s(),O(" ",e.sampleDetails.generos," ")}}function Ke(a,c){if(a&1&&(o(0,"ion-chip",45),m(1),r()),a&2){let e=g(2);s(),O(" ",e.sampleDetails.instrumentos," ")}}function Xe(a,c){if(a&1&&(o(0,"ion-chip",49),m(1),r()),a&2){let e=c.$implicit;s(),O(" ",e.trim()," ")}}function Ze(a,c){if(a&1&&(o(0,"div",46)(1,"div",47),x(2,Xe,2,1,"ion-chip",48),r()()),a&2){let e=g(2);s(2),l("ngForOf",e.sampleDetails.tags.split(","))}}function et(a,c){if(a&1&&p(0,"ion-icon",50),a&2){let e=c.$implicit;C("filled",e),l("name",e?"star":"star-outline")}}function tt(a,c){if(a&1){let e=M();o(0,"ion-icon",64),h("click",function(){let t=_(e).index,i=g(3);return f(i.setCalificacion(t+1))}),r()}if(a&2){let e=c.index,n=g(3);C("selected",e<n.calificacionSeleccionada),l("name",e<n.calificacionSeleccionada?"star":"star-outline")}}function nt(a,c){a&1&&p(0,"ion-spinner",14)}function it(a,c){a&1&&p(0,"ion-icon",65)}function ot(a,c){if(a&1){let e=M();o(0,"ion-card",51)(1,"ion-card-header")(2,"ion-card-title",52),p(3,"ion-icon",40),m(4," Deja tu comentario "),r()(),o(5,"ion-card-content")(6,"form",53,1),h("ngSubmit",function(){_(e);let t=g(2);return f(t.enviarComentario())}),o(8,"div",54)(9,"ion-label",55),m(10,"Tu calificaci\xF3n:"),r(),o(11,"div",56),x(12,tt,1,3,"ion-icon",57),r()(),o(13,"ion-item",58)(14,"ion-label",59),m(15,"Tu comentario"),r(),o(16,"textarea",60),V("ngModelChange",function(t){_(e);let i=g(2);return T(i.nuevoComentarioTexto,t)||(i.nuevoComentarioTexto=t),f(t)}),r()(),o(17,"ion-button",61),x(18,nt,1,0,"ion-spinner",62)(19,it,1,0,"ion-icon",63),m(20),r()()()()}if(a&2){let e=g(2);s(12),l("ngForOf",F(7,Ne)),s(4),D("ngModel",e.nuevoComentarioTexto),l("disabled",e.submittingComment),s(),l("disabled",!e.nuevoComentarioTexto.trim()||e.submittingComment),s(),l("ngIf",e.submittingComment),s(),l("ngIf",!e.submittingComment),s(),O(" ",e.submittingComment?"Publicando...":"Publicar Comentario"," ")}}function at(a,c){a&1&&(o(0,"ion-card",51)(1,"ion-card-content",66)(2,"p"),m(3,"Ya has publicado un comentario para este sample."),r()()())}function rt(a,c){a&1&&(o(0,"div",67)(1,"div",68),p(2,"ion-icon",40),r(),o(3,"h3"),m(4,"A\xFAn no hay comentarios"),r(),o(5,"p"),m(6,"\xA1S\xE9 el primero en comentar este sample!"),r()())}function st(a,c){if(a&1&&p(0,"ion-icon",50),a&2){let e=c.$implicit;C("filled",e),l("name",e?"star":"star-outline")}}function ct(a,c){if(a&1){let e=M();o(0,"div",80)(1,"ion-button",81),h("click",function(){_(e);let t=g().$implicit,i=g(2);return f(i.abrirModalEdicion(t))}),p(2,"ion-icon",82),r(),o(3,"ion-button",83),h("click",function(){_(e);let t=g().$implicit,i=g(2);return f(i.confirmarEliminacion(t.id))}),p(4,"ion-icon",84),r()()}}function lt(a,c){if(a&1&&(o(0,"div",69)(1,"div",70)(2,"div",71)(3,"div",72)(4,"h4",73),m(5),r(),o(6,"p",74),m(7),r()()(),o(8,"div",75)(9,"div",76),x(10,st,1,3,"ion-icon",35),r()()(),o(11,"div",77)(12,"p",78),m(13),r()(),x(14,ct,5,0,"div",79),r()),a&2){let e=c.$implicit,n=c.index,t=g(2);j("animation-delay",n*.1+"s"),C("animate-in",!0),s(5),b(e.usuario.username),s(2),b(t.formatDate(e.fecha)),s(3),l("ngForOf",t.getStarArray(e.calificacion)),s(3),b(e.texto),s(),l("ngIf",e.usuario.id==t.loggedInUserId||t.loggedInUserRole=="ADMIN")}}function mt(a,c){if(a&1&&(o(0,"div",15)(1,"ion-card",16)(2,"ion-card-header")(3,"div",17)(4,"div",18),p(5,"ion-icon",19),r(),o(6,"div",20)(7,"ion-card-title",21),m(8),r(),o(9,"div",22),x(10,Je,2,1,"ion-chip",23)(11,Ke,2,1,"ion-chip",24),r()()()(),o(12,"ion-card-content")(13,"div",25)(14,"div",26),p(15,"ion-icon",27),o(16,"span"),m(17),r()(),o(18,"div",26),p(19,"ion-icon",28),o(20,"span"),m(21),r()(),o(22,"div",26),p(23,"ion-icon",29),o(24,"span"),m(25),r()(),o(26,"div",26),p(27,"ion-icon",30),o(28,"span"),m(29),r()()(),x(30,Ze,3,1,"div",31),o(31,"div",32)(32,"div",33)(33,"div",34),x(34,et,1,3,"ion-icon",35),r(),o(35,"span",36),m(36),r()()()()(),x(37,ot,21,8,"ion-card",37)(38,at,4,0,"ion-card",37),o(39,"ion-card",38)(40,"ion-card-header")(41,"ion-card-title",39),p(42,"ion-icon",40),m(43),r()(),o(44,"ion-card-content"),x(45,rt,7,0,"div",41),o(46,"div",42),x(47,lt,15,9,"div",43),r()()()()),a&2){let e=g();s(8),b(e.sampleDetails.nombre),s(2),l("ngIf",e.sampleDetails.generos&&e.sampleDetails.generos.length>0),s(),l("ngIf",e.sampleDetails.instrumentos&&e.sampleDetails.instrumentos.length>0),s(6),b(e.formatDuration(e.sampleDetails.duracion)),s(4),b(e.sampleDetails.favoritos),s(4),b(e.sampleDetails.reproducciones),s(4),b(e.sampleDetails.descargas),s(),l("ngIf",e.sampleDetails.tags),s(4),l("ngForOf",e.getStarArray(e.sampleDetails.calificacionPromedio)),s(2),$(" ",e.sampleDetails.calificacionPromedio.toFixed(1)," (",e.sampleDetails.totalComentarios," ",e.sampleDetails.totalComentarios===1?"comentario":"comentarios",") "),s(),l("ngIf",!e.usuarioYaComento),s(),l("ngIf",e.usuarioYaComento),s(5),O(" Comentarios (",e.sampleDetails.totalComentarios,") "),s(2),l("ngIf",e.sampleDetails.comentarios.length===0),s(2),l("ngForOf",e.sampleDetails.comentarios)}}function dt(a,c){if(a&1){let e=M();o(0,"ion-icon",64),h("click",function(){let t=_(e).index,i=g(2);return f(i.setCalificacionEditada(t+1))}),r()}if(a&2){let e=c.index,n=g(2);C("selected",e<n.calificacionEditada),l("name",e<n.calificacionEditada?"star":"star-outline")}}function pt(a,c){a&1&&p(0,"ion-spinner",14)}function gt(a,c){a&1&&p(0,"ion-icon",101)}function ut(a,c){if(a&1){let e=M();o(0,"ion-header")(1,"ion-toolbar",85)(2,"ion-title"),m(3,"Editar Comentario"),r(),o(4,"ion-buttons",86)(5,"ion-button",87),h("click",function(){_(e);let t=g();return f(t.cerrarModalEdicion())}),p(6,"ion-icon",88),r()()()(),o(7,"ion-content",89)(8,"div",90)(9,"div",91)(10,"div",92),p(11,"ion-icon",93),r(),o(12,"h2"),m(13,"Editar tu comentario"),r(),o(14,"p"),m(15,"Modifica tu opini\xF3n sobre este sample"),r()(),o(16,"form",53,2),h("ngSubmit",function(){_(e);let t=g();return f(t.guardarCambiosComentario())}),o(18,"div",54)(19,"ion-label",55),m(20,"Tu calificaci\xF3n:"),r(),o(21,"div",56),x(22,dt,1,3,"ion-icon",57),r()(),o(23,"ion-item",94)(24,"ion-label",59),m(25,"Tu comentario"),r(),o(26,"ion-textarea",95),V("ngModelChange",function(t){_(e);let i=g();return T(i.textoEditado,t)||(i.textoEditado=t),f(t)}),r()(),o(27,"div",96)(28,"ion-button",97),x(29,pt,1,0,"ion-spinner",62)(30,gt,1,0,"ion-icon",98),m(31),r(),o(32,"ion-button",99),h("click",function(){_(e);let t=g();return f(t.cerrarModalEdicion())}),p(33,"ion-icon",100),m(34," Cancelar "),r()()()()()}if(a&2){let e=g();s(),C("dark-mode",e.darkMode),s(6),C("dark-mode",e.darkMode),s(15),l("ngForOf",F(12,Ne)),s(4),D("ngModel",e.textoEditado),l("disabled",e.updatingComment),s(2),l("disabled",!e.textoEditado.trim()||e.updatingComment),s(),l("ngIf",e.updatingComment),s(),l("ngIf",!e.updatingComment),s(),O(" ",e.updatingComment?"Guardando...":"Guardar Cambios"," "),s(),l("disabled",e.updatingComment)}}var _t=(()=>{let c=class c{constructor(n,t,i,d,u,v){this.route=n,this.router=t,this.comentarioService=i,this.themeService=d,this.playerService=u,this.location=v,this.sampleId=0,this.sampleDetails=null,this.loggedInUserId=this.getIdUser(),this.loggedInUserRole=this.getRole(),this.usuarioYaComento=!1,this.loading=!0,this.submittingComment=!1,this.updatingComment=!1,this.nuevoComentarioTexto="",this.calificacionSeleccionada=5,this.isEditModalOpen=!1,this.comentarioEditando=null,this.textoEditado="",this.calificacionEditada=5,this.isAlertOpen=!1,this.alertButtons=[],this.isToastOpen=!1,this.toastMessage="",this.toastColor="success",this.darkMode=!1,this.subscriptions=[],Pe({musicalNoteOutline:Ie,timeOutline:Re,heartOutline:Se,playCircleOutline:Ve,downloadOutline:ke,chatbubbleOutline:Oe,sendOutline:ze,createOutline:Ee,trashOutline:je,closeOutline:we,checkmarkOutline:ye,arrowBackOutline:Me,playOutline:Fe,pauseOutline:De,starOutline:Ue,star:Ae,personOutline:Te})}ngOnInit(){let n=this.themeService.isDarkMode().subscribe(t=>{this.darkMode=t});this.subscriptions.push(n),this.route.paramMap.subscribe(t=>{let i=t.get("id");i&&(this.sampleId=Number.parseInt(i,10),this.loadSampleDetails())})}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}loadSampleDetails(){this.loading=!0;let n=this.comentarioService.getSampleDetails(this.sampleId).subscribe({next:t=>{console.log("Detalles del sample cargados:",t),this.sampleDetails=t,this.loading=!1,this.usuarioYaComento=!!this.sampleDetails&&Array.isArray(this.sampleDetails.comentarios)&&this.sampleDetails.comentarios.some(i=>i.usuario.id==this.loggedInUserId),console.log("Usuario ya coment\xF3:",this.usuarioYaComento)},error:t=>{console.error("Error al cargar detalles del sample:",t),this.showToast("Error al cargar los detalles del sample","danger"),this.loading=!1}});this.subscriptions.push(n)}doRefresh(n){this.loadSampleDetails(),setTimeout(()=>{n.target.complete()},1e3)}enviarComentario(){if(!this.nuevoComentarioTexto.trim()){this.showToast("Por favor escribe un comentario","warning");return}this.submittingComment=!0;let n={texto:this.nuevoComentarioTexto.trim(),calificacion:this.calificacionSeleccionada},t=this.comentarioService.crearComentario(this.sampleId,n).subscribe({next:i=>{if(console.log("Comentario creado:",i),this.sampleDetails){this.sampleDetails.comentarios.unshift(i),this.sampleDetails.totalComentarios++;let d=this.sampleDetails.comentarios.reduce((u,v)=>u+v.calificacion,0);this.sampleDetails.calificacionPromedio=d/this.sampleDetails.comentarios.length}this.usuarioYaComento=!0,this.nuevoComentarioTexto="",this.calificacionSeleccionada=5,this.submittingComment=!1,this.showToast("Comentario publicado exitosamente","success")},error:i=>{console.error("Error al crear comentario:",i),this.submittingComment=!1,this.showToast("Error al publicar el comentario","danger")}});this.subscriptions.push(t)}getRole(){var n;return(n=localStorage.getItem("rolUsuario"))!=null?n:""}abrirModalEdicion(n){this.comentarioEditando=E({},n),this.textoEditado=n.texto,this.calificacionEditada=n.calificacion,this.isEditModalOpen=!0}cerrarModalEdicion(){this.isEditModalOpen=!1,this.comentarioEditando=null,this.textoEditado="",this.calificacionEditada=5}guardarCambiosComentario(){if(!this.textoEditado.trim()||!this.comentarioEditando){this.showToast("Por favor escribe un comentario","warning");return}this.updatingComment=!0;let n={texto:this.textoEditado.trim(),calificacion:this.calificacionEditada},t=this.comentarioService.modificarComentario(this.comentarioEditando.id,n).subscribe({next:i=>{if(console.log("Comentario actualizado:",i),this.sampleDetails){let d=this.sampleDetails.comentarios.findIndex(u=>u.id===i.id);if(d!==-1){this.sampleDetails.comentarios[d]=E(E({},this.sampleDetails.comentarios[d]),i);let u=this.sampleDetails.comentarios.reduce((v,qe)=>v+qe.calificacion,0);this.sampleDetails.calificacionPromedio=u/this.sampleDetails.comentarios.length}}this.updatingComment=!1,this.cerrarModalEdicion(),this.showToast("Comentario actualizado exitosamente","success")},error:i=>{console.error("Error al actualizar comentario:",i),this.updatingComment=!1,this.showToast("Error al actualizar el comentario","danger")}});this.subscriptions.push(t)}confirmarEliminacion(n){this.alertButtons=[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Eliminaci\xF3n cancelada")}},{text:"Eliminar",role:"destructive",handler:()=>{this.eliminarComentario(n),this.usuarioYaComento=!1}}],this.isAlertOpen=!0}eliminarComentario(n){let t=this.comentarioService.eliminarComentario(n).subscribe({next:()=>{if(console.log("Comentario eliminado"),this.sampleDetails)if(this.sampleDetails.comentarios=this.sampleDetails.comentarios.filter(i=>i.id!==n),this.sampleDetails.totalComentarios--,this.sampleDetails.comentarios.length>0){let i=this.sampleDetails.comentarios.reduce((d,u)=>d+u.calificacion,0);this.sampleDetails.calificacionPromedio=i/this.sampleDetails.comentarios.length}else this.sampleDetails.calificacionPromedio=0;this.showToast("Comentario eliminado exitosamente","success")},error:i=>{console.error("Error al eliminar comentario:",i),this.showToast("Error al eliminar el comentario","danger")}});this.subscriptions.push(t)}getStarArray(n){return Array(5).fill(!1).map((t,i)=>i<Math.floor(n))}setCalificacion(n){this.calificacionSeleccionada=n}setCalificacionEditada(n){this.calificacionEditada=n}formatDuration(n){let t=Math.floor(n/60),i=Math.floor(n%60);return`${t}:${i<10?"0":""}${i}`}formatDate(n){return new Date(n).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}showToast(n,t){this.toastMessage=n,this.toastColor=t,this.isToastOpen=!0}onToastDismiss(){this.isToastOpen=!1}onAlertDismiss(){this.isAlertOpen=!1}goBack(){this.location.back()}getIdUser(){return parseInt(localStorage.getItem("idUsuario")||"")}};c.\u0275fac=function(t){return new(t||c)(P(H),P(L),P(Ye),P($e),P(Be),P(B))},c.\u0275cmp=R({type:c,selectors:[["app-comentarios"]],viewQuery:function(t,i){if(t&1&&(k(z,5),k(Qe,5),k(We,5)),t&2){let d;S(d=I())&&(i.content=d.first),S(d=I())&&(i.editModal=d.first),S(d=I())&&(i.miComentarioTextarea=d.first)}},decls:17,vars:14,consts:[["editModal",""],["commentForm","ngForm"],["editForm","ngForm"],["slot","start"],[3,"click"],["id","main-content","no-focus-autoscroll","",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[1,"content-container"],["class","loader-container",4,"ngIf"],["class","sample-details",4,"ngIf"],[3,"didDismiss","isOpen"],["header","Confirmar eliminaci\xF3n","message","\xBFEst\xE1s seguro de que quieres eliminar este comentario? Esta acci\xF3n no se puede deshacer.",3,"didDismiss","isOpen","buttons"],["position","top",3,"didDismiss","isOpen","message","duration","color"],[1,"loader-container"],["name","crescent"],[1,"sample-details"],[1,"sample-info-card"],[1,"sample-header"],[1,"sample-icon"],["name","musical-note-outline"],[1,"sample-title-section"],[1,"sample-title"],[1,"sample-meta"],["color","primary",4,"ngIf"],["color","secondary",4,"ngIf"],[1,"sample-details-grid"],[1,"detail-item"],["name","time-outline"],["name","heart-outline","color","danger"],["name","play-circle-outline","color","success"],["name","download-outline","color","tertiary"],["class","tags-section",4,"ngIf"],[1,"rating-section"],[1,"rating-display"],[1,"stars-container"],[3,"name","filled",4,"ngFor","ngForOf"],[1,"rating-text"],["class","comment-form-card",4,"ngIf"],[1,"comments-card"],[1,"comments-title"],["name","chatbubble-outline"],["class","no-comments",4,"ngIf"],[1,"comments-list"],["class","comment-item",3,"animate-in","animation-delay",4,"ngFor","ngForOf"],["color","primary"],["color","secondary"],[1,"tags-section"],[1,"tags-container"],["class","tag-chip",4,"ngFor","ngForOf"],[1,"tag-chip"],[3,"name"],[1,"comment-form-card"],[1,"form-title"],[3,"ngSubmit"],[1,"rating-input-section"],[1,"rating-label"],[1,"rating-stars"],["class","rating-star",3,"name","selected","click",4,"ngFor","ngForOf"],[1,"comment-input"],["position","stacked"],["ngDefaultControl","","name","comentario","rows","4","maxlength","500","required","",1,"native-comment-textarea",3,"ngModelChange","ngModel","disabled"],["expand","block","type","submit",1,"submit-button",3,"disabled"],["name","crescent",4,"ngIf"],["name","send-outline","slot","start",4,"ngIf"],[1,"rating-star",3,"click","name"],["name","send-outline","slot","start"],[1,"ion-text-center"],[1,"no-comments"],[1,"no-comments-icon"],[1,"comment-item"],[1,"comment-header"],[1,"user-info"],[1,"user-details"],[1,"username"],[1,"comment-date"],[1,"comment-rating"],[1,"stars-small"],[1,"comment-content"],[1,"comment-text"],["class","comment-actions",4,"ngIf"],[1,"comment-actions"],["fill","clear","size","small",1,"action-button","edit-button",3,"click"],["name","create-outline","slot","icon-only"],["fill","clear","size","small","color","danger",1,"action-button","delete-button",3,"click"],["name","trash-outline","slot","icon-only"],[1,"modal-toolbar"],["slot","end"],[1,"close-button",3,"click"],["name","close-outline"],[1,"modal-content"],[1,"modal-container"],[1,"modal-header"],[1,"modal-icon"],["name","create-outline"],[1,"form-item"],["ngDefaultControl","","name","textoEditado","placeholder","Comparte tu opini\xF3n...","rows","4","maxlength","500","required","",3,"ngModelChange","ngModel","disabled"],[1,"modal-actions"],["expand","block","type","submit",1,"primary-button",3,"disabled"],["name","checkmark-outline",4,"ngIf"],["expand","block","fill","outline",1,"secondary-button",3,"click","disabled"],["name","close-outline","slot","start"],["name","checkmark-outline"]],template:function(t,i){if(t&1){let d=M();o(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",3)(3,"ion-back-button",4),h("click",function(){return _(d),f(i.goBack())}),r()(),o(4,"ion-title"),m(5,"Detalles del Sample"),r()()(),o(6,"ion-content",5)(7,"ion-refresher",6),h("ionRefresh",function(v){return _(d),f(i.doRefresh(v))}),p(8,"ion-refresher-content"),r(),o(9,"div",7),x(10,Ge,4,0,"div",8)(11,mt,48,17,"div",9),r(),o(12,"ion-modal",10,0),h("didDismiss",function(){return _(d),f(i.cerrarModalEdicion())}),x(14,ut,35,13,"ng-template"),r(),o(15,"ion-alert",11),h("didDismiss",function(){return _(d),f(i.onAlertDismiss())}),r(),o(16,"ion-toast",12),h("didDismiss",function(){return _(d),f(i.onToastDismiss())}),r()()}t&2&&(s(),C("dark-mode",i.darkMode),s(5),C("dark-mode",i.darkMode),l("fullscreen",!0),s(4),l("ngIf",i.loading),s(),l("ngIf",!i.loading&&i.sampleDetails),s(),l("isOpen",i.isEditModalOpen),s(3),l("isOpen",i.isAlertOpen)("buttons",i.alertButtons),s(),l("isOpen",i.isToastOpen)("message",i.toastMessage)("duration",3e3)("color",i.toastColor))},dependencies:[ne,_e,fe,de,ce,le,me,se,ie,re,ue,ge,ve,xe,ae,Ce,oe,z,pe,he,be,q,Y,N,te,X,Q,W,G,Z,ee,K,J],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: var(--background-color);font-family:Poppins,sans-serif}.content-container[_ngcontent-%COMP%]{padding:16px 16px 100px;max-width:800px;margin:0 auto}.loader-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px}.loader-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: var(--primary-color);margin-bottom:16px}.loader-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--text-muted);margin:0}.sample-info-card[_ngcontent-%COMP%], .comment-form-card[_ngcontent-%COMP%], .comments-card[_ngcontent-%COMP%]{margin-bottom:20px;border-radius:16px;box-shadow:0 4px 12px #0000001a;background:var(--card-background)}.sample-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.sample-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background:var(--primary-color);display:flex;align-items:center;justify-content:center;flex-shrink:0}.sample-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:30px;color:#fff}.sample-title-section[_ngcontent-%COMP%]{flex:1;min-width:0}.sample-title[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:var(--text-color);margin:0 0 8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sample-meta[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}.play-button[_ngcontent-%COMP%]{--color: var(--primary-color);--background: rgba(228, 145, 180, .1);--border-radius: 50%;width:56px;height:56px}.play-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:28px}.sample-details-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:16px;margin:16px 0}.detail-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:var(--text-color)}.detail-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px;color:var(--primary-color)}.tags-section[_ngcontent-%COMP%]{margin:16px 0}.tags-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.tag-chip[_ngcontent-%COMP%]{--background: var(--tag-background);--color: var(--tag-color);font-size:12px;height:28px}.rating-section[_ngcontent-%COMP%]{margin-top:16px;padding-top:16px;border-top:1px solid var(--border-color)}.rating-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.stars-container[_ngcontent-%COMP%]{display:flex;gap:2px}.stars-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:var(--star-empty)}.stars-container[_ngcontent-%COMP%]   ion-icon.filled[_ngcontent-%COMP%]{color:var(--star-filled)}.rating-text[_ngcontent-%COMP%]{font-size:14px;color:var(--text-muted);font-weight:500}.form-title[_ngcontent-%COMP%], .comments-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:18px;font-weight:600;color:var(--text-color)}.form-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], .comments-title[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--primary-color)}.rating-input-section[_ngcontent-%COMP%]{margin-bottom:20px}.rating-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:var(--text-color);margin-bottom:8px}.rating-stars[_ngcontent-%COMP%]{display:flex;gap:4px}.rating-star[_ngcontent-%COMP%]{font-size:24px;color:var(--star-empty);cursor:pointer;transition:all .2s ease}.rating-star.selected[_ngcontent-%COMP%]{color:var(--star-filled)}.rating-star[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.comment-input[_ngcontent-%COMP%]{--background: var(--card-background);--border-radius: 12px;--border-color: var(--border-color);--border-width: 2px;--border-style: solid;margin:16px 0}.comment-input.item-has-focus[_ngcontent-%COMP%]{--border-color: var(--primary-color)}.comment-input[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--text-color)!important;font-weight:600}.comment-input[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--color: var(--text-color);--placeholder-color: var(--text-muted)}.submit-button[_ngcontent-%COMP%]{--background: var(--primary-color);--color: white;--border-radius: 12px;height:48px;font-weight:600;margin-top:16px}.submit-button[_ngcontent-%COMP%]:hover:not([disabled]){--background: #d37a9e;transform:translateY(-1px)}.no-comments[_ngcontent-%COMP%]{text-align:center;padding:40px 20px;color:var(--text-muted)}.no-comments-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background:var(--primary-color);display:flex;align-items:center;justify-content:center;margin:0 auto 16px;opacity:.7}.no-comments-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:30px;color:#fff}.no-comments[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin:0 0 8px;color:var(--text-color)}.no-comments[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0}.comments-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.comment-item[_ngcontent-%COMP%]{padding:16px;border-radius:12px;background:var(--comment-background);border:1px solid var(--border-color);position:relative}.comment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px}.user-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.user-details[_ngcontent-%COMP%]{flex:1}.username[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:var(--text-color);margin:0 0 4px}.comment-date[_ngcontent-%COMP%]{font-size:12px;color:var(--text-muted);margin:0}.comment-rating[_ngcontent-%COMP%]{display:flex;align-items:center}.stars-small[_ngcontent-%COMP%]{display:flex;gap:1px}.stars-small[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:14px;color:var(--star-empty)}.stars-small[_ngcontent-%COMP%]   ion-icon.filled[_ngcontent-%COMP%]{color:var(--star-filled)}.comment-content[_ngcontent-%COMP%]{margin-bottom:12px}.comment-text[_ngcontent-%COMP%]{font-size:14px;line-height:1.5;color:var(--text-color);margin:0}.comment-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end}.action-button[_ngcontent-%COMP%]{width:36px;height:36px;--border-radius: 50%}.action-button.edit-button[_ngcontent-%COMP%]{--color: #3dc2ff}.action-button.edit-button[_ngcontent-%COMP%]:hover{--background: rgba(61, 194, 255, .1)}.action-button.delete-button[_ngcontent-%COMP%]{--color: #eb445a}.action-button.delete-button[_ngcontent-%COMP%]:hover{--background: rgba(235, 68, 90, .1)}.animate-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease forwards;opacity:0;transform:translateY(20px)}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.modal-toolbar[_ngcontent-%COMP%]{--background: var(--card-background);--color: var(--text-color)}.modal-toolbar[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{--color: var(--text-muted);--background: var(--action-button-background);border-radius:50%;width:40px;height:40px;margin-right:8px}.modal-toolbar[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{--background: var(--action-button-hover);--color: var(--primary-color)}.modal-content[_ngcontent-%COMP%]{--background: var(--background-color)}.modal-container[_ngcontent-%COMP%]{padding:20px;min-height:100%;display:flex;flex-direction:column}.modal-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.modal-header[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;background:var(--primary-color);display:flex;align-items:center;justify-content:center;margin:0 auto 16px}.modal-header[_ngcontent-%COMP%]   .modal-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:30px;color:#fff}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:700;margin:0 0 8px;color:var(--text-color)}.modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:var(--text-muted);margin:0}.form-item[_ngcontent-%COMP%]{--background: var(--card-background);--border-radius: 12px;--border-color: var(--border-color);--border-width: 2px;--border-style: solid;margin:16px 0}.form-item.item-has-focus[_ngcontent-%COMP%]{--border-color: var(--primary-color)}.form-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--text-color)!important;font-weight:600}.form-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{--color: var(--text-color);--placeholder-color: var(--text-muted)}.modal-actions[_ngcontent-%COMP%]{margin-top:auto;display:flex;flex-direction:column;gap:12px}.primary-button[_ngcontent-%COMP%]{--background: var(--primary-color);--color: white;--border-radius: 12px;height:48px;font-weight:600}.primary-button[_ngcontent-%COMP%]:hover:not([disabled]){--background: #d37a9e;transform:translateY(-1px)}.secondary-button[_ngcontent-%COMP%]{--color: var(--text-muted);--border-color: var(--border-color);--border-radius: 12px;height:44px}.secondary-button[_ngcontent-%COMP%]:hover:not([disabled]){--color: var(--primary-color);--border-color: var(--primary-color)}[_nghost-%COMP%]{--background-color: #f5f5f5;--card-background: #ffffff;--comment-background: #f8f9fa;--text-color: #333333;--text-muted: #666666;--primary-color: #e491b4;--border-color: rgba(0, 0, 0, .1);--tag-background: #f0f0f0;--tag-color: #666666;--star-filled: #ffc409;--star-empty: #e0e0e0;--action-button-background: #f5f5f5;--action-button-hover: #eeeeee}.dark-mode[_ngcontent-%COMP%]{--background-color: #121212;--card-background: #1e1e1e;--comment-background: #2a2a2a;--text-color: #ffffff;--text-muted: #aaaaaa;--border-color: rgba(255, 255, 255, .1);--tag-background: #2d2d2d;--tag-color: #dddddd;--star-empty: #555555;--action-button-background: #2d2d2d;--action-button-hover: #3d3d3d}.native-comment-textarea[_ngcontent-%COMP%]{width:100%;min-height:80px;padding:10px;border-radius:8px;font-family:var(--ion-font-family, sans-serif);font-size:16px;line-height:1.5;color:var(--ion-color-step-50, #ffffff);background:var(--ion-background-color, #222222);resize:vertical;border-color:#222;-webkit-appearance:none;-moz-appearance:none;appearance:none}.native-comment-textarea[_ngcontent-%COMP%]:focus{outline:none}.native-comment-textarea[_ngcontent-%COMP%]:disabled{opacity:0;cursor:not-allowed}ion-toolbar.dark-mode[_ngcontent-%COMP%]{--background: #1e1e1e;--color: white;box-shadow:0 1px 10px #0003}ion-toolbar.dark-mode[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{--color: #e491b4}ion-content.dark-mode[_ngcontent-%COMP%]{--background: #121212}body.dark-mode[_ngcontent-%COMP%]   .native-comment-textarea[_ngcontent-%COMP%]{background:var(--ion-color-step-100, #222222);color:var(--ion-color-step-50, #ffffff)}@media (max-width: 768px){.content-container[_ngcontent-%COMP%]{padding:12px}.sample-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center;gap:12px}.sample-title-section[_ngcontent-%COMP%]{order:1}.play-button[_ngcontent-%COMP%]{order:2;align-self:center}.sample-details-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}.rating-display[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.comment-header[_ngcontent-%COMP%]{flex-direction:column;gap:8px}.comment-rating[_ngcontent-%COMP%]{align-self:flex-start}}']});let a=c;return a})(),It=_t;export{_t as ComentariosPage,It as default};
