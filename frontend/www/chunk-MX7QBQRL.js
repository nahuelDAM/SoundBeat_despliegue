import{a as J}from"./chunk-5YXOTIYF.js";import"./chunk-MR5KIQS6.js";import{c as $,d as M,f as b,g as C}from"./chunk-FFJHRTPG.js";import{K as X,a as K,e as Q,i as W}from"./chunk-APCY6S75.js";import{$ as I,A as o,B as a,C as _,Ca as V,G as g,Ha as L,Ia as G,Ka as q,M as d,Z as k,_a as D,ab as U,bb as B,cb as H,fa as x,ja as u,k as h,ka as T,la as S,ma as E,na as P,pa as R,qa as A,r as s,ra as j,sa as N,ta as Y,u as y,v,x as l,ya as z,z as p}from"./chunk-7KKY7EE3.js";import"./chunk-B6B5UJKW.js";import"./chunk-ZGM7264U.js";import"./chunk-YKTCUWBK.js";import"./chunk-WS3OVXI4.js";import"./chunk-HII7ZFLR.js";import"./chunk-7JVEMCNU.js";import"./chunk-Z65EUC5N.js";import"./chunk-4U6PRYVA.js";import"./chunk-OWSRRI5Z.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{f as F}from"./chunk-RW4GY4BD.js";function Z(r,m){r&1&&(o(0,"div",20),d(1," El nombre de usuario es obligatorio "),a()),r&2&&l("@fadeInOut",void 0)}function ee(r,m){r&1&&(o(0,"div",20),d(1," Por favor, introduce un email v\xE1lido "),a()),r&2&&l("@fadeInOut",void 0)}function te(r,m){r&1&&(o(0,"div",20),d(1," La contrase\xF1a debe tener al menos 6 caracteres "),a()),r&2&&l("@fadeInOut",void 0)}function ne(r,m){r&1&&(o(0,"div",20),d(1," Las contrase\xF1as no coinciden "),a()),r&2&&l("@fadeInOut",void 0)}var be=(()=>{let m=class m{constructor(){this.passwordMismatch=!1,this.formSubmitAttempt=!1,this.cardAnimated=!1,this.darkMode=!1,this.loginService=h(J),this.router=h(x),this.toastController=h(U),this.animationCtrl=h(D),this.registerForm=new E({username:new P("",[u.required]),email:new P("",[u.required,u.email]),password:new P("",[u.required,u.minLength(6)]),confirmPassword:new P("",[u.required])}),K({checkmarkCircle:Q,closeCircle:W,sunnyOutline:X});let t=localStorage.getItem("darkMode");this.darkMode=t==="true"}ngOnInit(){}ionViewDidEnter(){this.cardAnimated=!0}toggleTheme(){this.darkMode=!this.darkMode,localStorage.setItem("darkMode",this.darkMode.toString())}isFieldValid(t){var n,e,i,c;return((e=(n=this.registerForm.get(t))==null?void 0:n.valid)!=null?e:!1)&&((c=(i=this.registerForm.get(t))==null?void 0:i.touched)!=null?c:!1)}isFieldInvalid(t){var n,e,i,c,f,w,O;return((e=(n=this.registerForm.get(t))==null?void 0:n.invalid)!=null?e:!1)&&((c=(i=this.registerForm.get(t))==null?void 0:i.touched)!=null?c:!1)||((w=(f=this.registerForm.get(t))==null?void 0:f.invalid)!=null?w:!1)&&((O=this.formSubmitAttempt)!=null?O:!1)}isFieldTouched(t){var n;return((n=this.registerForm.get(t))==null?void 0:n.touched)||this.formSubmitAttempt}validateField(t){let n=this.registerForm.get(t);n&&n.markAsTouched()}checkPasswordMatch(){var e,i;let t=(e=this.registerForm.get("password"))==null?void 0:e.value,n=(i=this.registerForm.get("confirmPassword"))==null?void 0:i.value;this.passwordMismatch=t!==n&&n!==""}iniciarSesion(){this.cardAnimated=!1,setTimeout(()=>{this.router.navigate(["/login"])},300)}register(){var n,e,i;this.formSubmitAttempt=!0,this.checkPasswordMatch();let t={username:(n=this.registerForm.get("username"))==null?void 0:n.value,email:(e=this.registerForm.get("email"))==null?void 0:e.value,password:(i=this.registerForm.get("password"))==null?void 0:i.value};console.log("Usuario a registrar:",t),this.registerForm.valid&&this.validarEmail(t.email)&&!this.passwordMismatch?this.loginService.register(t).subscribe({next:c=>{c.message==="Usuario registrado con \xE9xito."?(this.mensajeToast("Usuario registrado correctamente. Por favor, inicie sesi\xF3n.","success"),this.cardAnimated=!1,setTimeout(()=>{this.router.navigate(["/login"])},300)):this.mensajeToast(c.message)},error:c=>{console.error("Error HTTP en registro:",c),this.mensajeToast("Ocurri\xF3 un error inesperado al intentar registrar el usuario. Por favor, intente m\xE1s tarde.","danger")}}):this.validarEmail(t.email)?this.passwordMismatch?this.mensajeToast("Las contrase\xF1as no coinciden."):(Object.keys(this.registerForm.controls).forEach(c=>{let f=this.registerForm.get(c);f==null||f.markAsTouched()}),this.mensajeToast("Por favor, complete todos los campos correctamente.")):this.mensajeToast("Email inv\xE1lido.")}validarEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}mensajeToast(t,n="danger"){return F(this,null,function*(){yield(yield this.toastController.create({message:t,duration:2e3,color:n,position:"bottom",cssClass:"custom-toast"})).present()})}};m.\u0275fac=function(n){return new(n||m)},m.\u0275cmp=y({type:m,selectors:[["app-register"]],decls:32,vars:30,consts:[[3,"fullscreen"],[1,"theme-toggle",3,"click"],[3,"name"],[1,"content-container"],[1,"login-card"],[1,"logo-container"],["src","../../assets/img/logo.png","alt","Logo"],[3,"ngSubmit","formGroup"],[1,"welcome-title"],[1,"form-item"],["label","Nombre de usuario","labelPlacement","floating","fill","outline","formControlName","username",1,"custom-input",3,"ionInput"],["class","error-message",4,"ngIf"],["label","Correo electr\xF3nico","labelPlacement","floating","fill","outline","type","email","formControlName","email",1,"custom-input",3,"ionInput"],["label","Contrase\xF1a","labelPlacement","floating","fill","outline","type","password","formControlName","password",1,"custom-input",3,"ionInput"],["slot","end"],["label","Confirmar contrase\xF1a","labelPlacement","floating","fill","outline","type","password","formControlName","confirmPassword",1,"custom-input",3,"ionInput"],[1,"button-container"],["expand","full","shape","round","type","submit",1,"submit-button",3,"disabled"],[1,"login-link"],[3,"click"],[1,"error-message"]],template:function(n,e){n&1&&(o(0,"ion-content",0)(1,"div",1),g("click",function(){return e.toggleTheme()}),_(2,"ion-icon",2),a(),o(3,"div",3)(4,"div",4)(5,"div",5),_(6,"img",6),a(),o(7,"form",7),g("ngSubmit",function(){return e.register()}),o(8,"h2",8),d(9,"Crear Cuenta"),a(),o(10,"ion-item",9)(11,"ion-input",10),g("ionInput",function(){return e.validateField("username")}),a()(),v(12,Z,2,1,"div",11),o(13,"ion-item",9)(14,"ion-input",12),g("ionInput",function(){return e.validateField("email")}),a()(),v(15,ee,2,1,"div",11),o(16,"ion-item",9)(17,"ion-input",13),g("ionInput",function(){return e.validateField("password"),e.checkPasswordMatch()}),_(18,"ion-input-password-toggle",14),a()(),v(19,te,2,1,"div",11),o(20,"ion-item",9)(21,"ion-input",15),g("ionInput",function(){return e.validateField("confirmPassword"),e.checkPasswordMatch()}),_(22,"ion-input-password-toggle",14),a()(),v(23,ne,2,1,"div",11),o(24,"div",16)(25,"ion-button",17),d(26," Registrarse "),a()(),o(27,"div",18)(28,"ion-label"),d(29," \xBFYa tienes una cuenta? "),o(30,"span",19),g("click",function(){return e.iniciarSesion()}),d(31,"Iniciar sesi\xF3n"),a()()()()()()()),n&2&&(p("dark-mode",e.darkMode),l("fullscreen",!0),s(2),l("name",e.darkMode?"sunny-outline":"moon-outline"),s(2),p("animate-in",e.cardAnimated),s(3),l("formGroup",e.registerForm),s(3),p("valid-input",e.isFieldValid("username"))("invalid-input",e.isFieldInvalid("username")),s(2),l("ngIf",e.isFieldInvalid("username")&&e.isFieldTouched("username")),s(),p("valid-input",e.isFieldValid("email"))("invalid-input",e.isFieldInvalid("email")),s(2),l("ngIf",e.isFieldInvalid("email")&&e.isFieldTouched("email")),s(),p("valid-input",e.isFieldValid("password"))("invalid-input",e.isFieldInvalid("password")),s(3),l("ngIf",e.isFieldInvalid("password")&&e.isFieldTouched("password")),s(),p("valid-input",e.isFieldValid("confirmPassword")&&!e.passwordMismatch)("invalid-input",e.isFieldInvalid("confirmPassword")||e.passwordMismatch),s(3),l("ngIf",e.passwordMismatch&&e.isFieldTouched("confirmPassword")),s(2),p("button-shake",e.formSubmitAttempt&&(e.registerForm.invalid||e.passwordMismatch)),l("disabled",e.registerForm.invalid||e.passwordMismatch))},dependencies:[z,q,G,V,I,k,N,R,T,S,L,Y,A,j,H,B],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--background: var(--background-color);font-family:Poppins,sans-serif;transition:all .3s ease}.theme-toggle[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;z-index:100;background-color:var(--card-background);border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 10px #0000001a;cursor:pointer;transition:all .3s ease}.theme-toggle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--primary-color)}.content-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;padding:20px}.login-card[_ngcontent-%COMP%]{background-color:var(--card-background);border-radius:16px;padding:30px 20px;width:100%;max-width:400px;box-shadow:var(--card-shadow);transition:all .3s ease;opacity:0;transform:translateY(20px)}.animate-in[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}.logo-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px;height:auto;transition:all .3s ease}.welcome-title[_ngcontent-%COMP%]{color:var(--primary-color);font-family:Montserrat,sans-serif;font-size:28px;font-weight:600;text-align:center;margin-bottom:25px;transition:color .3s ease}ion-item.form-item[_ngcontent-%COMP%]{--background: transparent;--border-color: transparent;--border-width: 0;--inner-border-width: 0;--padding-start: 0;--padding-end: 0;--min-height: 70px;margin-bottom:20px;position:relative}.custom-input[_ngcontent-%COMP%]{--background: var(--input-background, #f0f0f0);--color: var(--input-text, #333333);--placeholder-color: var(--input-placeholder, #9e9e9e);--border-radius: 8px;--padding-start: 15px;--padding-end: 15px;--padding-top: 0;--padding-bottom: 0;--highlight-color: var(--primary-color, #e491b4)}.custom-input[_ngcontent-%COMP%]::part(native){padding-top:0;padding-bottom:0;min-height:48px;display:flex;align-items:center;line-height:48px}ion-input.has-focus[_ngcontent-%COMP%]::part(label), ion-input.has-value[_ngcontent-%COMP%]::part(label){transform:translateY(-12px) scale(.75)}ion-input[_ngcontent-%COMP%]::part(input){margin-top:0;margin-bottom:0;height:100%;display:flex;align-items:center;line-height:normal}.valid-input[_ngcontent-%COMP%]   .custom-input[_ngcontent-%COMP%]{--border-color: var(--success-color);--highlight-color: var(--success-color)}.invalid-input[_ngcontent-%COMP%]   .custom-input[_ngcontent-%COMP%]{--border-color: var(--error-color);--highlight-color: var(--error-color)}.validation-icon[_ngcontent-%COMP%]{position:absolute;right:15px;top:50%;transform:translateY(-50%);z-index:10}.validation-icon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;transition:all .3s ease}.validation-icon[_ngcontent-%COMP%]   ion-icon[name=checkmark-circle][_ngcontent-%COMP%]{color:var(--success-color)}.validation-icon[_ngcontent-%COMP%]   ion-icon[name=close-circle][_ngcontent-%COMP%]{color:var(--error-color)}.error-message[_ngcontent-%COMP%]{color:var(--error-color);font-size:12px;margin-top:-15px;margin-bottom:15px;padding-left:15px;text-align:left}.forgot-password[_ngcontent-%COMP%]{text-align:right;margin-bottom:25px}.forgot-password[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--primary-color);font-size:14px;font-weight:500;cursor:pointer;transition:color .3s ease}.button-container[_ngcontent-%COMP%]{margin-bottom:20px}ion-button[_ngcontent-%COMP%]{--background: var(--primary-color);--background-hover: var(--primary-color-hover);--color: #ffffff;--border-radius: 50px;--padding-top: 15px;--padding-bottom: 15px;font-weight:600;text-transform:uppercase;letter-spacing:1px;transition:all .3s ease;overflow:hidden}.submit-button[_ngcontent-%COMP%]{position:relative}.submit-button[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:50%;width:5px;height:5px;background:#ffffff80;opacity:0;border-radius:100%;transform:scale(1) translate(-50%);transform-origin:50% 50%}.submit-button[_ngcontent-%COMP%]:focus:not(:active):after{animation:_ngcontent-%COMP%_ripple 1s ease-out}.button-shake[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_shake .5s cubic-bezier(.36,.07,.19,.97) both}.register-link[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]{text-align:center}.register-link[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--text-color);font-size:14px;transition:color .3s ease}.register-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .login-link[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600;cursor:pointer;transition:color .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}@keyframes _ngcontent-%COMP%_ripple{0%{transform:scale(0);opacity:1}20%{transform:scale(25);opacity:1}to{opacity:0;transform:scale(40)}}'],data:{animation:[$("fadeInOut",[C(":enter",[b({opacity:0,transform:"translateY(-10px)"}),M("200ms ease-out",b({opacity:1,transform:"translateY(0)"}))]),C(":leave",[M("200ms ease-in",b({opacity:0,transform:"translateY(-10px)"}))])])]}});let r=m;return r})();export{be as RegisterPage};
